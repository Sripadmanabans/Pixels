apply plugin: "org.jetbrains.kotlin.jvm"
apply plugin: "org.jetbrains.kotlin.kapt"
apply plugin: "com.squareup.sqldelight"

archivesBaseName = "database-session-impl"

kotlin {
  explicitApi()

  sourceSets.all {
    languageSettings {
      useExperimentalAnnotation("kotlin.time.ExperimentalTime")
      useExperimentalAnnotation("kotlinx.coroutines.FlowPreview")
    }
  }
}

dependencies {
  api projects.database.session.public

  implementation libs.dagger.runtime
  kapt libs.dagger.compiler

  implementation libs.kotlin.coroutines.core
  implementation libs.kotlin.time

  implementation libs.sqlDelight.runtime
  implementation libs.sqlDelight.coroutines
}

sqldelight {
  PixelsDb {
    packageName = "com.adjectivemonk2.pixels.database.session"
    sourceFolders = ["database"]
    schemaOutputDirectory = file("build/database")
  }
}
